{% extends "base.html" %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-8">Admin Dashboard</h1>
    
    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center">
                <div class="p-3 rounded-full bg-blue-100 text-blue-600 mr-4">
                    <i class="fas fa-shopping-cart text-xl"></i>
                </div>
                <div>
                    <p class="text-gray-600">Total Orders</p>
                    <h3 class="text-2xl font-bold">{{ total_orders }}</h3>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center">
                <div class="p-3 rounded-full bg-green-100 text-green-600 mr-4">
                    <i class="fas fa-box text-xl"></i>
                </div>
                <div>
                    <p class="text-gray-600">Total Products</p>
                    <h3 class="text-2xl font-bold">{{ total_products }}</h3>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center">
                <div class="p-3 rounded-full bg-purple-100 text-purple-600 mr-4">
                    <i class="fas fa-users text-xl"></i>
                </div>
                <div>
                    <p class="text-gray-600">Total Customers</p>
                    <h3 class="text-2xl font-bold">{{ total_users }}</h3>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center">
                <div class="p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4">
                    <i class="fas fa-clock text-xl"></i>
                </div>
                <div>
                    <p class="text-gray-600">Pending Orders</p>
                    <h3 class="text-2xl font-bold">{{ pending_orders }}</h3>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Active Banner Section -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold">Active Banner</h2>
            <a href="{{ url_for('admin_banners') }}" class="bg-primary hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300">
                Manage Banners
            </a>
        </div>
        
        {% if active_banner %}
        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
            <div class="flex items-center">
                <img src="{{ url_for('static', filename='uploads/banners/' + active_banner[2]) }}" alt="{{ active_banner[1] }}" class="w-24 h-16 object-cover rounded-md mr-4">
                <div>
                    <h3 class="font-semibold">{{ active_banner[1] }}</h3>
                    <p class="text-gray-600 text-sm">Active since {{ active_banner[4] | format_date('%B %d, %Y') }}</p>
                </div>
            </div>
            <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Active</span>
        </div>
        {% else %}
        <div class="text-center py-8 bg-gray-50 rounded-lg">
            <i class="fas fa-image text-4xl text-gray-300 mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-600">No active banner</h3>
            <p class="text-gray-500">Add a banner to display on the homepage</p>
        </div>
        {% endif %}
    </div>
    
    <!-- Recent Orders -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold">Recent Orders</h2>
            <a href="{{ url_for('admin_orders') }}" class="text-primary hover:underline">View all orders</a>
        </div>
        
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="px-4 py-2 text-left">Order ID</th>
                        <th class="px-4 py-2 text-left">Customer</th>
                        <th class="px-4 py-2 text-left">Date</th>
                        <th class="px-4 py-2 text-left">Amount</th>
                        <th class="px-4 py-2 text-left">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in recent_orders %}
                    <tr class="border-b border-gray-200">
                        <td class="px-4 py-3">#{{ order[0] }}</td>
                        <td class="px-4 py-3">{{ order[4] }}</td>
                        <td class="px-4 py-3">{{ order[1] | format_date('%Y-%m-%d') }}</td>
                        <td class="px-4 py-3">{{ format_currency(order[2]) }}</td>
                        <td class="px-4 py-3">
                            <span class="px-2 py-1 rounded-full text-xs 
                                {% if order[3] == 'pending' %}bg-yellow-100 text-yellow-800
                                {% elif order[3] == 'confirmed' %}bg-blue-100 text-blue-800
                                {% elif order[3] == 'packed' %}bg-purple-100 text-purple-800
                                {% elif order[3] == 'shipped' %}bg-indigo-100 text-indigo-800
                                {% elif order[3] == 'out_for_delivery' %}bg-orange-100 text-orange-800
                                {% elif order[3] == 'delivered' %}bg-green-100 text-green-800
                                {% else %}bg-red-100 text-red-800{% endif %}">
                                {{ order[3] }}
                            </span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        {% if not recent_orders %}
        <div class="text-center py-8">
            <i class="fas fa-shopping-cart text-4xl text-gray-300 mb-4"></i>
            <h3 class="text-lg font-semibold text-gray-600">No orders yet</h3>
            <p class="text-gray-500">Orders will appear here when customers place them</p>
        </div>
        {% endif %}
    </div>
    
    <!-- Quick Actions -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <a href="{{ url_for('admin_products') }}" class="bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition duration-300">
            <div class="p-3 rounded-full bg-blue-100 text-blue-600 inline-block mb-4">
                <i class="fas fa-box text-2xl"></i>
            </div>
            <h3 class="font-semibold">Manage Products</h3>
            <p class="text-gray-600 text-sm mt-2">{{ total_products }} products</p>
        </a>
        

        <a href="{{ url_for('admin_orders') }}" class="bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition duration-300">
            <div class="p-3 rounded-full bg-green-100 text-green-600 inline-block mb-4">
                <i class="fas fa-shopping-cart text-2xl"></i>
            </div>
            <h3 class="font-semibold">Manage Orders</h3>
            <p class="text-gray-600 text-sm mt-2">{{ total_orders }} orders</p>
        </a>
        
        <a href="{{ url_for('admin_users') }}" class="bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition duration-300">
            <div class="p-3 rounded-full bg-purple-100 text-purple-600 inline-block mb-4">
                <i class="fas fa-users text-2xl"></i>
            </div>
            <h3 class="font-semibold">Manage Users</h3>
            <p class="text-gray-600 text-sm mt-2">{{ total_users }} customers</p>
        </a>
        
        <a href="{{ url_for('admin_banners') }}" class="bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition duration-300">
            <div class="p-3 rounded-full bg-yellow-100 text-yellow-600 inline-block mb-4">
                <i class="fas fa-image text-2xl"></i>
            </div>
            <h3 class="font-semibold">Manage Banners</h3>
            <p class="text-gray-600 text-sm mt-2">Homepage promotion</p>
        </a>

        <!-- <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"> -->
            <!-- Existing cards... -->
            
            <a href="{{ url_for('admin_settings') }}" class="bg-white rounded-lg shadow-md p-6 text-center hover:shadow-lg transition duration-300">
                <div class="p-3 rounded-full bg-gray-100 text-gray-600 inline-block mb-4">
                    <i class="fas fa-cog text-2xl"></i>
                </div>
                <h3 class="font-semibold">Settings</h3>
                <p class="text-gray-600 text-sm mt-2">Payment QR & System</p>
            </a>
        <!-- </div> -->
    </div>
</div>
{% endblock %}